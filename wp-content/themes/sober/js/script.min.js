(function(e){"use strict";var t=t||{};t.init=function(){this.$window=e(window);this.$body=e(document.body);this.$sideMenu=e(".side-menu");this.data=soberData||{};this.closeTopbar();this.menuHover();this.toggleSideMenu();this.toggleModal();this.removeCartItem();this.toggleTabs();this.focusInputs();this.filterProducts();this.sortProducts();this.productQuantity();this.productImagesLightbox();this.stickyProductSummary();this.productImageSlider();this.productImageZoom();this.stickUpSells();this.upsellsCarousel();this.checkBox();this.formatGallery();this.backToTop();this.toggleProductFilter();this.productQuickView();this.instanceSearch();this.fakeScrollbar();this.stickyHeader();this.navAjax();this.portfolioFilter();this.productVariationSwatches();this.productGalleryZoom();this.productGallerySlider();this.singeProductAjaxAddToCart();this.openCartModalAfterAdd();this.pageHeaderParallax();this.responsive();this.preload();this.popup();this.addedToCartNotice();this.checkoutTerms();this.fixVC();this.loginModalAuthenticate();e(document.body).trigger("sober_init",[t])};t.isBlocked=function(e){return e.is(".processing")||e.parents(".processing").length};t.block=function(e){if(!t.isBlocked(e)){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}};t.unblock=function(e){e.removeClass("processing").unblock()};t.isVisible=function(e){if(e instanceof jQuery){e=e[0]}var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)};t.formatGallery=function(){e(".entry-gallery").addClass("owl-carousel").owlCarousel({singleItem:true,items:1,navSpeed:800,nav:true,dots:false,autoplay:true,dotsSpeed:1e3,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>']})};t.checkBox=function(){e("#ship-to-different-address").find(".input-checkbox").on("change",function(){if(e(this).is(":checked")){e(this).parent().find(".checkbox").addClass("checked")}else{e(this).parent().find(".checkbox").removeClass("checked")}}).trigger("change")};t.navAjax=function(){t.$body.on("click",".ajax-navigation a",function(t){t.preventDefault();var o=e(this),a=o.parent(),i=e("#main"),s=o.attr("href");if(a.hasClass("loading")){return}a.addClass("loading");e.get(s,function(t){var o=e(t),n=o.find("title").text();if(a.hasClass("posts-navigation")){var r=e(o.find("#main").html());r.hide();i.append(r);r.fadeIn(1e3);a.remove()}else if(a.hasClass("portfolio-navigation")){var l=o.find(".portfolio-items .portfolio"),c=o.find(".ajax-navigation a");if(l.length){l.imagesLoaded(function(){i.find(".portfolio-items").isotope("insert",l)});a.removeClass("loading");if(c.length){a.html(c)}else{a.fadeOut()}}}window.history.pushState(null,n,s)})});if("ajax"===t.data.shop_nav_type||"infinity"===t.data.shop_nav_type){t.$body.on("click",".woocommerce-pagination .next",function(t){t.preventDefault();var o=e(this),a=o.closest(".woocommerce-pagination"),i=a.prev("ul.products"),s=o.attr("href");if(o.hasClass("loading")){return}o.addClass("loading");l(s,i,function(t){var o=e(t).find(".woocommerce-pagination");if(o.length){a.html(o.html())}else{a.html("")}})})}if("infinity"===t.data.shop_nav_type){var o=e(".woocommerce-pagination"),a=o.find(".next"),i=e("ul.products");if(a.length){var s=false,n;t.$window.on("scroll",function(){if(s){return}o=e(".woocommerce-pagination");a=e(".next",o);s=true;clearTimeout(n);r();setTimeout(function(){s=false},100);n=setTimeout(function(){s=false;r()},200)})}var r=function(){if(t.isVisible(o)&&a.length){if(a.hasClass("loading")){return}a.addClass("loading");l(a.attr("href"),i,function(t){var i=e(t).find(".woocommerce-pagination");if(i.length){o.html(i.html());a=o.find(".next")}else{o.html("");a.length=0}})}}}function l(o,a,i){e.get(o,function(s){var n=e(s).find("#primary"),r=n.find("ul.products").children();r.imagesLoaded(function(){var o=e(".product-thumbnail-zoom",r);if(o.length){o.each(function(){var t=e(this);t.zoom({url:t.attr("data-zoom_image")})})}e(".product-images__slider",r).owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']});if("function"===typeof i){i(s)}var n=0;r.each(function(t){var o=e(this);setTimeout(function(){a.isotope("insert",o)},t*100);t++});setTimeout(function(){a.isotope("layout")},n*100)});window.history.pushState(null,"",o)})}};t.closeTopbar=function(){e("#topbar").on("click",".close",function(t){t.preventDefault();e(this).closest("#topbar").slideUp()})};t.menuHover=function(){var o={none:["show","hide"],fade:["fadeIn","fadeOut"],slide:["slideDown","slideUp"]};var a=t.data.menu_animation?o[t.data.menu_animation]:"fade";e(".site-navigation li, .topbar-menu li").on("mouseenter",function(){e(this).addClass("active").children(".sub-menu").stop(true,true)[a[0]]()}).on("mouseleave",function(){e(this).removeClass("active").children(".sub-menu").stop(true,true)[a[1]]()})};t.toggleModal=function(){t.$body.on("click",'[data-toggle="modal"]',function(o){o.preventDefault();var a=e(this),i=e("#"+a.data("target")),s=a.data("tab");if(!i.length){return}t.openModal(i,s)});t.$body.on("click",".close-modal, .sober-modal-backdrop",function(e){e.preventDefault();t.closeModal()});e(document).on("keyup",function(e){if(e.keyCode===27){t.closeModal()}})};t.openModal=function(o,a){o=o instanceof jQuery?o:e(o);if(!o.length){return}t.$body.addClass("modal-open");o.fadeIn();o.addClass("open");if(a){var i=o.find(".tab-nav").filter('[data-tab="'+a+'"]');i.trigger("click")}};t.closeModal=function(){t.$body.removeClass("modal-open");var o=e(".sober-modal.open");o.fadeOut(function(){e(this).removeClass("open")});t.$body.trigger("sober_modal_closed",[o])};t.removeCartItem=function(){var o=e("#cart-modal");o.on("click",".remove",function(a){a.preventDefault();o.addClass("loading");t.block(o);var i=e(this).attr("href");e.ajax({type:"GET",url:i,dataType:"html",success:function(){e(document.body).trigger("wc_fragment_refresh");e(document.body).on("wc_fragments_refreshed",function(){o.removeClass("loading");t.unblock(o)})}})})};t.toggleSideMenu=function(){t.$body.on("click",".toggle-nav",function(){var o="#"+e(this).data("target");e(o).toggleClass("open");t.$body.toggleClass("side-menu-opened")});t.$body.on("click touchstart",".side-menu-backdrop",function(){e(".side-menu").removeClass("open");t.$body.removeClass("side-menu-opened")});t.$sideMenu.find(".menu > .menu-item-has-children, .menu > ul > .menu-item-has-children").filter(function(){return e(this).hasClass("current-menu-item")||e(this).hasClass("current-menu-ancestor")}).addClass("open");t.$sideMenu.on("click",".menu > .menu-item-has-children > a, .menu > ul > .menu-item-has-children > a",function(t){var o=e(this).parent();if(o.hasClass("open")&&o.hasClass("clicked")){return true}t.stopPropagation();t.preventDefault();o.addClass("clicked");o.toggleClass("open").children("ul").slideToggle();o.siblings(".open").removeClass("open").children("ul").slideUp()}).on("click",".menu > .menu-item-has-children > .toggle, .menu > ul > .menu-item-has-children > .toggle",function(t){t.stopPropagation();t.preventDefault();var o=e(this).parent();o.toggleClass("open").children("ul").slideToggle();o.siblings(".open").removeClass("open").children("ul").slideUp()})};t.focusInputs=function(){e(".woocommerce-account, .woocommerce-checkout").on("focus",".input-text",function(){e(this).closest(".form-row").addClass("active")}).on("focusout",".input-text",function(){if(e(this).val()===""){e(this).closest(".form-row").removeClass("active")}}).find(".input-text").each(function(){if(e(this).val()!==""){e(this).closest(".form-row").addClass("active")}});e("#commentform").on("focus",":input",function(){e(this).closest("p").addClass("active")}).on("focusout",":input",function(){if(e(this).val()===""){e(this).closest("p").removeClass("active")}}).find(":input").each(function(){if(e(this).val()!==""){e(this).closest("p").addClass("active")}})};t.toggleTabs=function(){t.$body.on("click",".tabs-nav .tab-nav",function(){var t=e(this),o=t.data("tab");if(t.hasClass("active")){return}t.addClass("active").siblings(".active").removeClass("active");t.closest(".tabs-nav").next(".tab-panels").children('[data-tab="'+o+'"]').addClass("active").siblings(".active").removeClass("active")})};t.filterProducts=function(){var o={itemSelector:".product",transitionDuration:700,layoutMode:"fitRows",isOriginLeft:!(t.data.isRTL==="1"),hiddenStyle:{opacity:0,transform:"translate3d(0,50px,0)"},visibleStyle:{opacity:1,transform:"none"}};e(".woocommerce.archive .site-content ul.products").imagesLoaded(function(){e(this.elements).isotope(o)});if("isotope"===t.data.tab_behaviour){e(".products-filter").on("click","li",function(t){t.preventDefault();t.stopPropagation();var o=e(this),a=o.attr("data-filter");if(o.hasClass("active")){return}o.addClass("active").siblings(".active").removeClass("active");o.closest(".shop-toolbar").next("ul.products").isotope({filter:a})})}else if("ajax"===t.data.tab_behaviour){e(".products-filter").on("click","li",function(a){a.preventDefault();a.stopPropagation();var i=e(this),s=i.closest(".shop-toolbar").next("ul.products"),n=s.next(".woocommerce-pagination"),r=i.children("a").attr("href");if(i.hasClass("active")){return}e(":input",".soo-product-filter-widget").not(":button, :submit, :reset").val("").removeAttr("checked").removeAttr("selected");e(".selected",".soo-product-filter-widget").removeClass("selected");e(".filter-slider",".soo-product-filter-widget").each(function(){var o=e(this),a=o.slider("option");o.slider("values",[a.min,a.max]);t.$body.trigger("soo_price_filter_create",[a.min,a.max,o])});if(!s.length){i.closest(".shop-toolbar").next(".woocommerce-info").replaceWith('<ul class="products"/>');s=i.closest(".shop-toolbar").next("ul.products")}i.addClass("active").siblings(".active").removeClass("active");s.addClass("loading");s.append('<li class="loading-overlay"><span class="loading-icon">\n'+'<span class="bubble"><span class="dot"></span></span>\n'+'<span class="bubble"><span class="dot"></span></span>\n'+'<span class="bubble"><span class="dot"></span></span>\n'+"</span></li>");n.fadeOut();e.get(r,function(a){var i=e(a).find("#primary"),l=e("ul.products",i).children(),c=e(".woocommerce-info",i),d=e(".woocommerce-pagination",i);if(l.length){e(".woocommerce-result-count").html(e(".woocommerce-result-count",i).html());l.imagesLoaded(function(){var a=e(".product-thumbnail-zoom",l);if(a.length){a.each(function(){var t=e(this);t.zoom({url:t.attr("data-zoom_image")})})}e(".product-images__slider",l).owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']});if(s.data("isotope")){s.isotope("destroy")}s.html(l).removeClass("loading");s.isotope(o);l.addClass("soberFadeIn soberAnimation")});if(d.length){n.html(d.html()).fadeIn()}else{n.html("").fadeOut()}}else{e(".woocommerce-result-count").html("");s.html("").append(e("<li/>").append(c));n.html("").fadeOut()}window.history.pushState(null,"",r)})})}else{e(".products-filter").on("click","li",function(t){e(this).addClass("active").siblings(".active").removeClass("active")})}t.$body.on("soo_filter_request_success",function(){e("li:first",".products-filter").addClass("active").siblings(".active").removeClass("active");setTimeout(function(){e("ul.products","#primary").isotope(o)},100)})};t.sortProducts=function(){if(!e.fn.select2){return}e(".woocommerce-ordering select").select2({minimumResultsForSearch:-1,width:"auto",dropdownAutoWidth:true})};t.productQuantity=function(){t.$body.on("click",".quantity .increase, .quantity .decrease",function(t){t.preventDefault();var o=e(this),a=o.siblings(".qty"),i=parseFloat(a.val()),s=parseFloat(a.attr("min")),n=parseFloat(a.attr("max")),r=parseFloat(a.attr("step"));s=s?s:1;n=n?n:i+1;r=r?r:1;if(o.hasClass("decrease")&&i>s){a.val(i-r);a.trigger("change")}if(o.hasClass("increase")&&i<n){a.val(i+r);a.trigger("change")}})};t.stickUpSells=function(){if(!t.$body.hasClass("product-style-3")){return}var o=e("#topbar"),a=e("#masthead"),i=e(".upsells");if(!i.length){return}var s=e("#primary");var n=o.length?o.outerHeight():0;n+=a.length?a.outerHeight():0;e(window).on("scroll",function(){if(e(document).scrollTop()>=n){i.addClass("sticky");if(!i.data("wrap")){i.wrap('<div id="upsells-wrap" class="upsells-wrap"/>');i.data("wrap",true)}}else{i.removeClass("sticky");if(i.data("wrap")){i.unwrap();i.data("wrap",false)}}if(e(window).scrollTop()>=s.offset().top+s.outerHeight()-window.innerHeight){var t=e("#upsells-wrap");t.addClass("sticky-bottom").css("top",function(){return e(window).scrollTop()-s.offset().top});if(t.outerHeight()<=i.outerHeight()){t.addClass("reach-bottom")}else{t.removeClass("reach-bottom")}}else{e("#upsells-wrap").removeClass("sticky-bottom").css("top",0)}}).trigger("scroll")};t.upsellsCarousel=function(){if(!t.$body.hasClass("product-style-3")){return}var o=e(".upsells");if(!o.length){return}if(o.find("li.product").length>4){o.find("ul.products").addClass("owl-carousel").owlCarousel({rtl:t.data.isRTL==="1",owl2row:true,owl2rowTarget:"product",dots:true,nav:true,navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>'],items:2,responsive:{0:{items:1},992:{items:1},1200:{items:2}}})}};t.productImagesLightbox=function(){if("1"!==t.data.lightbox){return}var o=e("div.product div.images"),a=e(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image",o);if(!o.length){return}o.on("click",".woocommerce-product-gallery__slider .woocommerce-product-gallery__image a",function(t){t.preventDefault();var o=i(),a=e(t.target),s=a.closest(".owl-item"),n={index:s.length?s.index():a.closest(".woocommerce-product-gallery__image").index(),history:false,bgOpacity:.85,showHideOpacity:true,mainClass:"pswp--minimal-dark",captionEl:true,fullscreenEl:false,shareEl:false,tapToClose:true,tapToToggleControls:false};var r=new PhotoSwipe(e(".pswp").get(0),window.PhotoSwipeUI_Default,o,n);r.init()});function i(){var t=[];if(a.length>0){a.each(function(o,a){var i=e(a).find("img"),s=i.attr("data-large_image"),n=i.attr("data-large_image_width"),r=i.attr("data-large_image_height"),l={src:s,w:n,h:r,title:i.attr("data-caption")?i.attr("data-caption"):""};t.push(l)})}return t}};t.stickyProductSummary=function(){if(e.fn.stick_in_parent&&t.$window.width()>767){e("div.product .sticky-summary").stick_in_parent({parent:".product-summary"})}};t.backToTop=function(){t.$body.on("click","#gotop",function(t){t.preventDefault();e("html, body").animate({scrollTop:0},"slow")})};t.toggleProductFilter=function(){t.$body.on("click",".toggle-filter",function(t){t.preventDefault();e(this).next(".filter-widgets").fadeIn(function(){e(this).addClass("active")})}).on("click",".filter-widgets button.close",function(){e(this).closest(".filter-widgets").fadeOut(function(){e(this).removeClass("active")})})};t.productQuickView=function(){if(!t.$body.hasClass("product-quickview-enable")){return}var o="ul.products .woocommerce-LoopProduct-link";switch(t.data.quickview){case"buy_button":o="ul.products .add_to_cart_button, ul.products .button.product_type_external";break;case"view_button":o="ul.products .quick_view_button";break;case"title":o="ul.products h3 a";break}t.$body.on("click",o,function(o){if(t.$window.width()<=768){return}o.preventDefault();var a=e(this),i=a.data("url")?a.data("url"):a.attr("href"),s=e("#quick-view-modal"),n=s.find(".product"),r=s.find(".modal-header .close-modal").first().clone();n.hide().html("").addClass("invisible");s.addClass("loading");t.openModal(s);e.get(i,function(o){var a=e(o),l=a.find("#content").find(".product-summary"),c=l.find(".images"),d=l.find(".variations_form"),u=e(".woocommerce-product-gallery__slider",c);l.find(".product-toolbar").remove();l.find("h1.product_title").wrapInner('<a href="'+i+'"></a>');c.find(".thumbnails").remove();n.show().html(l).prepend(r);if(t.data.quickview_details){l.find(".entry-summary").append('<a href="'+i+'" class="view-details">'+t.data.l10n.quick_view_details+"</a>")}u.find("img").css("height",n.outerHeight());if(u.children().length>1){u.addClass("owl-carousel").owlCarousel({rtl:t.data.isRTL==="1",items:1,smartSpeed:500,dots:false,nav:true,navText:['<svg width="20" height="20"><use xlink:href="#left-arrow"></use></svg>','<svg width="20" height="20"><use xlink:href="#right-arrow"></use></svg>']})}c.css("opacity",1);u.on("click",".woocommerce-product-gallery__image a",function(e){e.preventDefault()});d.wc_variation_form().find(".variations select:eq(0)").change();if(e.fn.tawcvs_variation_swatches_form){d.tawcvs_variation_swatches_form();t.modifyVariationSwatches(d)}d.on("reset_image found_variation",function(){u.trigger("to.owl.carousel",[0])});s.removeClass("loading");n.removeClass("invisible");if(typeof SimpleScrollbar!=="undefined"){SimpleScrollbar.initEl(l.find(".summary").get(0))}t.$body.trigger("sober_quickview_opened",[a,s,t])},"html");if("buy_button"===t.data.quickview){return false}})};t.instanceSearch=function(){var o=null,a="",i={},s={},n=e("#search-modal"),r=n.find("form"),l=r.find("input.search-field"),c=n.find(".search-results"),d=c.find(".search-results-button"),u=n.find("input[name=post_type]").val();t.$body.on("click",'[data-toggle="modal"][data-target="search-modal"]',function(){l.focus()});n.on("keyup",".search-field",function(e){var t=false;if(typeof e.which==="undefined"){t=true}else if(typeof e.which==="number"&&e.which>0){t=!e.ctrlKey&&!e.metaKey&&!e.altKey}if(!t){return}if(o){o.abort()}f(true)}).on("change",".product-cats input",function(){if(o){o.abort()}f(false)}).on("click",".search-reset",function(){if(o){o.abort()}n.addClass("reset");c.find(".results-container, .view-more-results").slideUp(function(){n.removeClass("searching searched found-products found-no-product invalid-length reset")})}).on("focusout",".search-field",function(){if(l.val().length<2){c.find(".results-container, .view-more-results").slideUp(function(){n.removeClass("searching searched found-products found-no-product invalid-length")})}});function f(t){var s=l.val(),f=r.find(".product-cats input:checked"),p=f.length?f.val():"",h=s+"["+p+"]";if(a===s&&t){return}a=s;if(s.length<2){n.removeClass("searching found-products found-no-product").addClass("invalid-length");return}var g=r.attr("action")+"?"+r.serialize();d.removeClass("soberFadeInUp");e(".view-more-results",c).slideUp(10);n.removeClass("found-products found-no-product").addClass("searching");if(h in i){m(i[h])}else{o=e.get(g,function(t){var o=e("#primary",t);if("product"===u){var a=e("ul.products",o);if(a.length){a.children(".last").nextAll().remove();i[h]={found:true,items:a,url:g}}else{i[h]={found:false,text:e(".woocommerce-info",o).text()}}}else if("post"===u){var s=e("#main article:lt(3)",o);if(s.length){s.addClass("col-md-4");i[h]={found:true,items:e('<div class="posts row" />').append(s),url:g}}else{i[h]={found:false,text:e(".no-results .page-header-none",o).text()}}}m(i[h]);n.addClass("searched")},"html")}}function m(o){var a="product"===u?"woocommerce":"sober-post-grid";n.removeClass("searching");if(o.found){var i=o.items.clone(),s=i.children();n.addClass("found-products");c.find(".results-container").addClass(a).html(i);if("product"===u){_.each(e(".product-thumbnail-zoom",c),function(t){var o=e(t);o.zoom({url:o.attr("data-zoom_image")})});e(".product-images__slider",c).owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']})}for(var r=0;r<s.length;r++){e(s[r]).css("animation-delay",r*100+"ms")}s.addClass("soberFadeInUp soberAnimation");d.attr("href",o.url).css("animation-delay",r*100+"ms").addClass("soberFadeInUp soberAnimation");c.find(".results-container, .view-more-results").slideDown(300,function(){n.removeClass("invalid-length")})}else{n.addClass("found-no-product");c.find(".results-container").removeClass(a).html(e('<div class="not-found text-center" />').text(o.text));d.attr("href","#");c.find(".view-more-results").slideUp(300);c.find(".results-container").slideDown(300,function(){n.removeClass("invalid-length")})}n.addClass("searched")}};t.fakeScrollbar=function(){var e=document.querySelector(".primary-menu.side-menu");if(e&&typeof SimpleScrollbar!=="undefined"){SimpleScrollbar.initEl(e)}};t.stickyHeader=function(){if(!t.data.sticky_header||"none"===t.data.sticky_header){return}var e=document.getElementById("masthead");var o=document.getElementById("topbar");var a=0;if(t.$body.hasClass("header-white")||t.$body.hasClass("no-page-header")&&!t.$body.hasClass("page-title-hidden")&&!t.$body.hasClass("page-template-homepage")){if(o){o.style.marginBottom=e.clientHeight+"px"}else{document.getElementById("page").style.paddingTop=e.clientHeight+"px"}}if("smart"===t.data.sticky_header&&typeof Headroom!=="undefined"){a=o?o.clientHeight:1;var i=new Headroom(e,{offset:a,onTop:function(){setTimeout(function(){e.classList.remove("headroom--animation")},500)},onNotTop:function(){setTimeout(function(){e.classList.add("headroom--animation")},10)}});i.init()}else if("normal"===t.data.sticky_header){a=o?o.clientHeight:1;s();t.$window.on("scroll",function(){s()})}function s(){if(t.$window.scrollTop()>=a){e.classList.add("sticky")}else{e.classList.remove("sticky")}}};t.portfolioFilter=function(){var o=e(".portfolio-items");if(!o.length){return}var a={itemSelector:".portfolio",transitionDuration:700,isOriginLeft:!(t.data.isRTL==="1")};if(o.hasClass("portfolio-fullwidth")){a.masonry={columnWidth:".col-md-3"}}if(o.hasClass("portfolio-classic")){a.layoutMode="fitRows"}o.imagesLoaded(function(){e(this.elements).isotope(a)});var i=e(".portfolio-filter");i.on("click","li",function(t){t.preventDefault();var o=e(this),a=o.attr("data-filter");if(o.hasClass("active")){return}o.addClass("active").siblings(".active").removeClass("active");o.closest(".portfolio-filter").next(".portfolio-items").isotope({filter:a})})};t.productVariationSwatches=function(){t.$body.on("tawcvs_initialized",function(){var o=e(".variations_form");t.modifyVariationSwatches(o)})};t.modifyVariationSwatches=function(t){var o=t.find(".variations .variable");var a=false;o.each(function(){if(e(this).hasClass("swatches")){a=true}});if(!a){t.removeClass("swatches-support")}if(o.length%2){o.last().addClass("wide-variable")}t.off("tawcvs_no_matching_variations");t.on("tawcvs_no_matching_variations",function(){event.preventDefault();t.find(".woocommerce-variation.single_variation").show();if(typeof wc_add_to_cart_variation_params!=="undefined"){t.find(".single_variation").stop(true,true).slideDown(500).html('<p class="invalid-variation-combination">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>")}})};t.productGalleryZoom=function(){t.initZoom(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image");e(".woocommerce-product-gallery--with-images").on("woocommerce_gallery_init_zoom",function(){var o=e(".woocommerce-product-gallery__image",this).first().trigger("zoom.destroy");t.initZoom(o)})};t.initZoom=function(o){if(!t.data.zoom){return}var a=e(o),i=a.width(),s=false;a.each(function(t,o){var a=e(o).find("img");if(a.data("large_image_width")>i){s=true;return false}});if(s){var n={touch:false};if("ontouchstart"in window){n.on="click"}a.trigger("zoom.destroy");a.zoom(n)}};t.productGallerySlider=function(){var o=e(".woocommerce div.product"),a=e("div.images",o),i=e(".woocommerce-product-gallery__slider",a),s=e(".thumbnails",a);if(!o.hasClass("layout-style-1")&&!o.hasClass("layout-style-4")&&i.children().length>1&&!i.hasClass("owl-loaded")){i.addClass("owl-carousel").owlCarousel({rtl:t.data.isRTL==="1",dots:false,items:1,loop:false,responsive:{0:{items:1}}})}if(o.hasClass("layout-style-1")&&i.children().length>1){if(t.$window.width()<992&&!i.hasClass("owl-carousel")){i.addClass("owl-carousel").owlCarousel({rtl:t.data.isRTL==="1",items:1,loop:false,margin:10,responsive:{0:{items:1}}})}else if(t.$window.width()>=992&&i.hasClass("owl-carousel")){i.trigger("destroy.owl.carousel").removeClass("owl-carousel")}}if(o.hasClass("layout-style-4")&&i.children().length>1){var n=i.children().length>2?1:0;i.addClass("owl-carousel").owlCarousel({rtl:t.data.isRTL==="1",items:2,startPosition:n,loop:false,margin:30,center:true,dots:false,nav:true,navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>'],onInitialized:function(){t.initZoom(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image")}})}a.css("opacity",1);a.on("click",".thumbnails .woocommerce-product-gallery__image a",function(t){t.preventDefault();var o=e(this).closest(".woocommerce-product-gallery__image");i.trigger("to.owl.carousel",[o.index()])});i.on("translated.owl.carousel",function(e){s.children().removeClass("active").eq(e.item.index).addClass("active")});e(".variations_form",o).on("reset_image found_variation",function(){i.trigger("to.owl.carousel",[0])}).on("reset_image",function(){s.children(":eq(0)").find("img").wc_reset_variation_attr("src")}).on("found_variation",function(e,t){s.children(":eq(0)").find("img").wc_set_variation_attr("src",t.image.thumb_src)})};t.productImageZoom=function(){e(".product-thumbnail-zoom").each(function(){var t=e(this);t.zoom({url:t.attr("data-zoom_image")})});t.$body.on("soo_filter_request_success",function(){e(".product-thumbnail-zoom",".archive.woocommerce #primary ul.products").each(function(){var t=e(this);t.zoom({url:t.attr("data-zoom_image")})})})};t.productImageSlider=function(){e(".product-images__slider").owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']});e(".sober-product-carousel").on("initialized.owl.carousel",function(){e(".product-images__slider").trigger("refresh.owl.carousel")});t.$body.on("soo_filter_request_success",function(){e(".product-images__slider",".archive.woocommerce #primary ul.products").owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:t.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']})})};t.singeProductAjaxAddToCart=function(){if("yes"!==t.data.single_ajax_add_to_cart){return}t.$body.on("submit","form.cart",function(){var o=e(this),a=o.find(".single_add_to_cart_button"),i=o.attr("action")?o.attr("action"):window.location.href;if(a.hasClass("loading")){return false}a.removeClass("added").addClass("loading");e.ajax({url:i,data:o.serialize(),method:"POST",success:function(o){a.removeClass("loading").addClass("added");if(t.data.open_cart_modal_after_add!=="1"){var i=e(o).find(".woocommerce-error, .woocommerce-info, .woocommerce-message"),s=e(".sober-alert-bar");if(!s.length){s=e('<div class="sober-alert-bar"></div>');t.$body.append(s)}s.html(i);setTimeout(function(){s.addClass("active")},500);if(i.hasClass("woocommerce-message")){setTimeout(function(){s.removeClass("active")},5e3)}}else{t.$body.trigger("added_to_cart")}t.$body.trigger("wc_fragment_refresh");if(typeof wc_add_to_cart_params!=="undefined"){if(wc_add_to_cart_params.cart_redirect_after_add==="yes"&&wc_add_to_cart_params.cart_url){window.location.href=wc_add_to_cart_params.cart_url}}}});return false});t.$body.on("click",".sober-alert-bar .close",function(t){t.preventDefault();e(this).closest(".sober-alert-bar").removeClass("active")})};t.openCartModalAfterAdd=function(){if(t.data.open_cart_modal_after_add!=="1"){return}t.$body.on("added_to_cart",function(){if(e("#cart-modal").hasClass("open")){return}t.closeModal();t.openModal("#cart-modal","cart")})};t.pageHeaderParallax=function(){if(typeof Rellax==="undefined"){return}var o=e(".page-header .page-title"),a=e(".page-header .breadcrumb");if("up"===t.data.page_header_parallax){if(o.length){new Rellax(".page-header .page-title",{speed:1})}if(a.length){new Rellax(".page-header .breadcrumb",{speed:2})}}else if("down"===t.data.page_header_parallax){if(o.length){new Rellax(".page-header .page-title",{speed:-2})}if(a.length){new Rellax(".page-header .breadcrumb",{speed:-1})}}};t.preload=function(){var o=e("#preloader");if(!o.length){return}t.$window.on("beforeunload",function(){o.fadeIn("slow")});o.fadeOut(800)};t.responsive=function(){t.responsiveVideos();t.$window.on("resize",t.productGallerySlider)};t.responsiveVideos=function(){e(document.body).fitVids()};t.popup=function(){var e=parseInt(t.data.popup_frequency),o=parseInt(t.data.popup_visible_delay);if(e>0&&document.cookie.match(/^(.*;)?\s*sober_popup\s*=\s*[^;]+(.*)?$/)){return}o=Math.max(o,0);o="delay"===t.data.popup_visible?o:0;t.$window.on("load",function(){setTimeout(function(){t.openModal("#popup")},o*1e3)});t.$body.on("sober_modal_closed",function(t,o){if(!o.hasClass("sober-popup")){return}var a=new Date,i=a.getTime();a.setTime(a.getTime()+e*24*60*60*1e3);document.cookie="sober_popup="+i+";expires="+a.toGMTString()+";path=/"})};t.addedToCartNotice=function(){if(!t.data.added_to_cart_notice||!e.fn.notify){return}e.notify.addStyle("sober",{html:'<div><svg viewBox="0 0 20 20" class="message-icon"><use xlink:href="#success" href="#success"></use></svg><span data-notify-text/></div>'});e(document).on("added_to_cart",function(){e.notify(t.data.l10n.added_to_cart_notice,{autoHideDelay:2e3,className:"success",style:"sober",showAnimation:"fadeIn",hideAnimation:"fadeOut"})})};t.checkoutTerms=function(){t.$body.off("click","a.woocommerce-terms-and-conditions-link")};t.fixVC=function(){if(t.data.isRTL!=="1"){return}e(document).on("vc-full-width-row-single",function(e,t){t.el.css({left:"auto",right:t.offset})})};t.loginModalAuthenticate=function(){e("#login-modal").on("submit",".woocommerce-form-login",function(o){var a=e("input[name=username]",this).val(),i=e("input[name=password]",this).val(),s=e("input[name=rememberme]",this).is(":checked"),n=e("[type=submit]",this),r=e(this),l=r.next(".woocommerce-error");if(!a||!i){return true}o.preventDefault();n.addClass("loading");if(l.length){l.fadeOut()}e.post(t.data.ajaxurl,{action:"sober_login_authenticate",creds:{user_login:a,user_password:i,remember:s}},function(t){if(!t.success){if(!l.length){l=e('<div class="woocommerce-error sober-message-box danger"/>');l.append('<svg viewBox="0 0 20 20" class="message-icon"><use xlink:href="#warning"></use></svg>').append('<div class="box-content"></div>').append('<a class="close" href="#"><svg viewBox="0 0 14 14"><use xlink:href="#close-delete-small"></use></svg></a>');l.hide().insertAfter(r)}l.find(".box-content").html(t.data);l.fadeIn();n.removeClass("loading")}else{window.location.reload()}})})};e(function(){t.init()})})(jQuery);